# Introduction

In this exericse, you will explore the sample to-do list application built with Ionic 4 framework and perform the following tasks:

* Generate client SDK based on the OpenAPI specification. This SDK will provide code to call ToDo List REST API.
* Connect to-do list app with the mock server created in [Exercise 2](exercise-2.md).
* Extend the code to update an item in the to-do list app.

# Prerequisites

[Node.js - 8.0+](https://nodejs.org/en/download/)

## Step 1 - Explore the app

Git clone the [api-first-workshop-angular](https://github.com/rhappdev/api-first-workshop-angular) project to your local machine and install the dependencies:

```
git clone https://github.com/rhappdev/api-first-workshop-angular

cd api-first-workshop-angular

npm install
```

## Step 2 - Generate client SDK
Generate client SDK based on specification created in [Exercise 1](exercise-1.md). For reference, the `api-first-workshop-angular` repo contains the complete version of the specification in the file `api-code-gen/todolist.yaml`.

First, install `openapi-generator-cli` module globally:
```
npm install -g @openapitools/openapi-generator-cli
```

Then, run the OpenAPI generator with the following command:
```
openapi-generator generate -g typescript-angular --additional-properties=prependFormOrBodyParameters=true,ngVersion=7.0.0 -o ./src/app/rest -i ./api-code-gen/todolist.yaml
```

Explore the SDK generated by OpenAPI generator tool in the folder `src/app/rest`.

## Step 3 - Review the code in Angular service component
Review code in `src/app/services/item.service.ts` to get an idea on how the REST call is made by utilizing the SDK generated in Step 2.

## Step 4 - Connect to the mock server

Connect to the mock server by changing the value for `API_URL` in `src/app/enviroments/environment.ts` file.

## Step 5 - Run the app and verify you are able to get the list of items and add an item
Install Ionic framework:

```
npm install -g ionic
```

and run:

```
ionic serve
```

  >**Note:** when you create a new item, it doesn't get appended to the list, as there is no real logic behind the app â€“ the list of all items is mocked by Postman mock server, and always returns the same list of items. If you verify the _Network_ tab of the Chrome Developer Tools, you can see that that the POST request returns a successful response.

## Step 6 - Extend the app to allow users to update an item

  * Include a function to get item by ID in `src/app/services/item.service.ts`:
    
  ``` javascript
      getItemById(id): Observable<Item> {
       return this.todoAPI.getItem(id);
      }
  ```

  * Include a function update item by ID in `src/app/services/item.service.ts`:
    
  ``` javascript
    updateItem(newValues) {
      return this.todoAPI.updateItem(newValues, newValues.id);
    }
  ```

   > **Note:** To have a better understanding, review the code in `src/app/pages/update-item/update-item.page.ts` to see how `itemService` is being called.

## Step 7 - Finally run the app 

```
ionic serve
```
And you should able to update an item by connecting to the mock server. Verify by watching the _Network_ tab in  Chrome Developer Tools. Note that the _Update Item_ endpoint will only work for the item with the ID `1234`, as this is the one that we specified in the examples in Exercise 2.





   











